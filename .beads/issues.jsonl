{"id":"dojo-2zp","title":"UX-020: Net Worth Dashboard MVP as landing page","description":"Implements the Dashboard landing page per `next_up/net_worth_dashboard.md`.\n\nRouting decision (explicit):\n- The app currently uses SPA hash routing (e.g., `/#/transactions`). Define the canonical dashboard route (e.g., `/#/` and/or `/#/dashboard`) and ensure the app landing entry redirects there.\n\nAPI contract decision (explicit):\n- The dashboard spec calls for `GET /api/net-worth/history?interval={interval}`. Another doc mentions a `history?as_of=` variant.\n- Choose a canonical query param for the history endpoint and keep frontend/backend/tests consistent (do not ship with two competing contracts).\n\nScope (MVP):\n- Net Worth header + full-bleed interactive history chart with interval toggles.\n- Accounts panel with deep links into Account Details and Transactions filtered to that account (do not confuse this with the Assets \u0026 Liabilities page).\n- Budget Watchlist widget.\n- Add required backend endpoint for net worth history.\n\nSelectors (stable for Cypress):\n- Page/header/chart: [data-testid=dashboard-page], [data-testid=dashboard-net-worth-header], [data-testid=dashboard-net-worth-chart], [data-testid=dashboard-net-worth-tooltip]\n- Intervals: [data-testid=dashboard-interval-1D], [data-testid=dashboard-interval-1W], [data-testid=dashboard-interval-1M], [data-testid=dashboard-interval-3M], [data-testid=dashboard-interval-YTD], [data-testid=dashboard-interval-1Y], [data-testid=dashboard-interval-5Y], [data-testid=dashboard-interval-Max]\n- Accounts: [data-testid=dashboard-accounts-panel], [data-testid=dashboard-account-row], [data-testid=dashboard-account-link-details], [data-testid=dashboard-account-link-transactions]\n- Watchlist: [data-testid=dashboard-budget-watchlist], [data-testid=dashboard-watchlist-item]\n\nTests:\n- Backend: add/extend tests to cover `/api/net-worth/history` response shape and query-param behavior.\n- Cypress: add a dashboard e2e spec that stubs history data, asserts interval toggle wiring, and verifies account deep links navigate to account details and account-filtered transactions.\n\nRelated: dojo-pjb (epic), dojo-pjb.1 (UX-001 account detail navigation contract), dojo-pjb.2 (UX-002 investments entry point), dojo-pjb.14 (UX-017 loading/readiness).\n","acceptance_criteria":"- Navigating to the app root/landing route renders the Net Worth Dashboard (global header remains visible).\n- Interval controls exist with options: 1D, 1W, 1M, 3M, YTD, 1Y, 5Y, Max; selecting an interval reloads the chart data and updates the header’s change metrics for that interval.\n- Net Worth header shows: label, current value, absolute change, and percent change for the selected interval; header metrics do not change on chart hover/drag (chart tooltip handles dynamic measurement).\n- History chart is full-bleed (100vw) area chart and supports:\n  - Hover tooltip with date + value.\n  - Drag-to-measure range with start/end values and delta (absolute + percent), and dynamic green/red coloring based on the selected range.\n  - Responsive resize behavior (no overflow; tooltip stays on-screen).\n- Accounts panel lists all active accounts sorted by current balance (desc) and shows name, type, and current balance; each account row provides deep links into (a) account details and (b) transactions filtered to that account.\n- Budget Watchlist renders a list of categories with progress-bar/sparkline style showing available vs allocated, including the “Unfunded / Overspent” visual state; includes an “Edit List” affordance (can be a stub if list editing is not implemented in MVP).\n- Backend exposes `GET /api/net-worth/history?interval={interval}` returning an array of `{date: ISOString, value: int (minor units)}` and the frontend consumes it for the chart.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-11T13:19:16.840833407-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-11T13:31:05.056902202-08:00","labels":["backend","frontend","ux"]}
{"id":"dojo-cdu","title":"UX-019: Reconciliation delta-finding improvements (cash/credit)","description":"Goal:\n- Make cash/credit reconciliation faster to diagnose when numbers do not match, without changing the underlying manual reconciliation workflow.\n\nTerminology (explicit):\n- \"Cleared balance\": the cleared/posted balance from the institution.\n- \"Pending total\": the institution-reported total of pending transactions.\n- Avoid legacy/ambiguous wording (e.g., \"statement balance\") in the primary UI.\n\nUX requirements:\n- Rename reconciliation inputs/labels to \"Cleared balance\" and \"Pending total\".\n- Always show three computed deltas (Cleared, Pending, Total), currency formatted, and explicitly label the delta direction so users can interpret +/- values correctly.\n- Add mismatch-hunting helpers:\n  - Text search and status filters (cleared/pending) for the transaction list.\n  - A one-click \"Amount = diff\" affordance that filters/highlights transactions whose amount equals the currently selected delta (including sign handling).\n- Preserve existing manual entry/edit flow during reconciliation (do not force auto-matching).\n\nWorkflow note:\n- Pending transactions are generally entered last; keep the default flow compatible with an oldest→newest workflow (and do not make pending entry the first/primary path).\n\nSelectors (stable for Cypress):\n- Inputs: [data-testid=reconcile-cleared-balance], [data-testid=reconcile-pending-total]\n- Deltas: [data-testid=reconcile-delta-cleared], [data-testid=reconcile-delta-pending], [data-testid=reconcile-delta-total]\n- Helpers: [data-testid=reconcile-filter-text], [data-testid=reconcile-filter-status], [data-testid=reconcile-amount-equals-diff]\n- List: [data-testid=reconcile-transaction-list]\n\nBackend decision (open):\n- Decide whether pending_total is (A) persisted on the reconciliation commit (e.g., pending_total_minor) or (B) derived from worksheet data and treated as a helper input only. Keep this issue implementable either way.\n\nRelated: dojo-pjb (epic), dojo-pjb.7 (UX-008 confirm/undo patterns), dojo-pjb.9 (UX-010 keyboard/accessibility), dojo-pjb.14 (UX-017 loading/readiness).\n","acceptance_criteria":"- Reconciliation UI labels use “Cleared balance” and “Pending total” (no legacy wording in the primary UI).\n- UI displays three currency-formatted deltas (cleared, pending, total) and updates them live as the user changes inputs or marks transactions cleared/pending.\n- Mismatch-hunting helpers exist:\n  - Search/filter controls can narrow the transaction list by text and by cleared/pending status.\n  - A one-click “Amount = diff” control filters/highlights transactions whose amount equals the current selected delta (including sign handling).\n- Manual entry flow remains available during reconciliation (user can add/edit a transaction while reconciling) and deltas update immediately after save.\n- A reconciliation session can still be completed successfully for a cash and a credit account using the updated UI.\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-11T13:18:49.499233126-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-11T13:31:05.021571634-08:00","labels":["cypress","frontend","ux"]}
{"id":"dojo-d5j","title":"UX-018: Transactions fast-entry composer + keyboard-first contract","description":"Goal:\n- Make transaction entry and row actions fast, keyboard-first, and low-noise.\n\nUX direction / contract:\n- Add a fast-entry composer above the Transactions ledger.\n- Amount input is signed: positive = inflow, negative = outflow, with validation and clear sign affordance.\n- After successful submit, carry-forward defaults for Date, Account, and Status to speed repeated entry.\n- Remove per-row action buttons; actions live in a selected-row toolbar and/or right-side inspector.\n- Ledger table display keeps separate Inflow and Outflow columns (no single signed amount column in the grid).\n\nNotes:\n- This feature likely supersedes the earlier “per-row Edit/Delete buttons” direction; keep existing issue(s) for history but reconcile UX approach when implementing.\n\nRelated: dojo-pjb (epic), dojo-pjb.5 (UX-006 TransactionTable editing), dojo-pjb.9 (UX-010 keyboard/accessibility), dojo-pjb.7 (UX-008 confirm/undo).\n","acceptance_criteria":"- Transactions page exposes a fast-entry composer that can be completed end-to-end using keyboard only (tab through fields, submit without mouse).\n- Signed amount input accepts an optional leading sign and is interpreted as: \"+\" = inflow, \"-\" = outflow.\n- Ledger grid retains separate Inflow and Outflow columns (no single signed amount column in the grid); submitted signed amounts render into the correct column (e.g., +12.34 =\u003e Inflow $12.34 and Outflow blank; -12.34 =\u003e Outflow $12.34 and Inflow blank).\n- After successful submit, Date/Account/Status carry forward by default for the next entry; Amount clears and focus returns to the amount input (keyboard-first).\n- Transaction rows contain no per-row action buttons; row actions are available via a selected-row toolbar/inspector and are keyboard-accessible.\n- UI exposes stable selectors for Cypress at minimum: [data-testid=transaction-composer], [data-testid=transaction-composer-amount], [data-testid=transaction-composer-submit], [data-testid=transaction-selection-toolbar], [data-testid=transaction-action-edit], [data-testid=transaction-action-status], [data-testid=transaction-action-delete].\n- Cypress: update user stories 05 (manual transaction lifecycle), 06 (editable ledger rows), and 14 (monthly summary cards) plus cypress/support/pages/TransactionPage.js to use the composer + selection toolbar contract (no reliance on inflow/outflow radios or Enter-to-save inline editing).\n","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-11T13:18:32.039644814-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-11T13:31:04.985277391-08:00","labels":["cypress","frontend","ux"]}
{"id":"dojo-pjb","title":"Cypress-grounded UX audit follow-ups (2026-01-11)","description":"Fan-out epic for UX audit findings grounded in Cypress user stories; child issues capture evidence, problem statement, recommendation, and verifiable acceptance.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-10T16:36:34.704231937-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:36:34.704231937-08:00","labels":["cypress","ux"]}
{"id":"dojo-pjb.1","title":"UX-001: Standardize account detail navigation (modal vs route)","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/15-account-onboarding-ledger.cy.js — \"records opening balances, shows cards/modals, and reconciles hero stats\"\n- Click path: .account-card__name → .account-card click → expects modal via [data-modal-label] + [data-modal-balance], closes with [data-close-modal]\n- Audit finding: app now navigates to /#/accounts/:accountId instead of showing the modal expected by this story\n\nProblem:\n- Accounts overview → account detail interaction is inconsistent with the Cypress-grounded UX contract, causing paradigm drift (modal vs full-route navigation).\n- This drift breaks user expectations and forces Cypress tests to encode unstable assumptions.\n\nRecommendation:\n- Decide and standardize a single interaction contract for account cards (either modal detail or routed detail page).\n- Add a deterministic landmark for the chosen contract (e.g., [data-account-detail-modal] or [data-account-detail-page]) so Cypress can assert without relying on incidental DOM structure.","acceptance_criteria":"- Either (A) clicking an account card on /#/accounts opens a detail modal with stable selectors, OR (B) it routes to /#/accounts/:accountId and shows a stable page landmark.\n- Update cypress/e2e/user-stories/15-account-onboarding-ledger.cy.js to match the chosen contract (no brittle modal assumptions if routing).\n- Cypress story 15 passes without workarounds or fixed waits.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-10T16:40:30.245355241-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:40:30.245355241-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.1","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:40:30.246382821-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.10","title":"UX-011: Remove fixed cy.wait by adding deterministic ready landmarks","description":"Evidence:\n- Fixed waits exist in Cypress user stories:\n  - cypress/e2e/user-stories/05-manual-transaction-lifecycle.cy.js: cy.wait(1000) (Vue hydrate)\n  - cypress/e2e/user-stories/17-editable-allocation-ledger.cy.js: cy.wait(500) (Vue update after row click)\n  - cypress/e2e/user-stories/19-allocations-page.cy.js: cy.wait(1000) (Vue render)\n\nProblem:\n- Arbitrary waits introduce flakiness and slow the suite; they also hide real readiness/loading bugs in the UI.\n\nRecommendation:\n- Add deterministic readiness landmarks in the UI/store lifecycle (e.g., [data-app-ready], [data-page-ready], or per-component ready states).\n- Prefer waiting on network aliases + UI landmarks over time-based sleeps.","acceptance_criteria":"- Eliminate cy.wait(500/1000) from the Cypress user stories listed above by replacing with deterministic UI readiness selectors (and/or network waits).\n- Cypress stories remain stable without increasing total runtime via larger fixed waits.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:57:05.703349994-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:57:05.703349994-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.10","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:57:05.704392194-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.11","title":"UX-012: Align terminology (Ready to Assign, groups, envelopes/categories)","description":"Evidence:\n- Cypress uses inconsistent terminology across stories:\n  - cypress/e2e/user-stories/09-quick-allocate-budget-modal.cy.js: test titles + alert message use both \"Ready-to-Assign\" and \"Ready to Assign\"\n  - cypress/e2e/user-stories/19-allocations-page.cy.js: error text \"Ready-to-Assign is insufficient for this allocation.\"\n  - cypress/e2e/user-stories/14-display-monthly-summary-cards.cy.js: UI label used in allocation transfer is \"Ready to Assign\"\n\nProblem:\n- Inconsistent naming increases confusion and makes tests/copy brittle (string-matching drifts over time).\n\nRecommendation:\n- Pick canonical terminology and apply consistently in UI labels, errors, and Cypress assertions (including data-test selectors where possible).\n- Clarify: “budget category” vs “envelope”, “group” vs “budget group”, and hyphenation of “Ready to Assign”.","acceptance_criteria":"- UI strings and error messages use consistent terminology (canonical spelling/hyphenation) across budgets/allocations/transactions.\n- Update Cypress stories that assert these strings to match the canonical terminology (no mixed \"Ready-to-Assign\" vs \"Ready to Assign\").","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-10T16:57:14.052290305-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:57:14.052290305-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.11","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:57:14.053287787-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.12","title":"UX-013: Add explainability for credit payments + transfers-as-spending","description":"Evidence:\n- Credit card payment categories:\n  - cypress/e2e/user-stories/16-credit-transaction-correction-workflow.cy.js — \"corrects a credit card transaction by changing the account and updates all summaries\"\n  - Budget page asserts system-like categories such as \"Visa Signature Payment\" and \"Mastercard Rewards Payment\" change as a side-effect of spending\n- Transfers-as-spending:\n  - cypress/e2e/user-stories/12-investment-transfers-treated-as-spending.cy.js — \"logs a Down Payment Fund transfer as budget activity without touching net worth\"\n\nProblem:\n- Users don't get enough in-context explanation for why certain system categories change (credit payment envelopes) or why a transfer counts as spending activity while net worth stays constant.\n- This is especially confusing during correction workflows (changing credit account) where multiple summaries move together.\n\nRecommendation:\n- Add an \"Explain this\" affordance (tooltip/drawer) on credit payment categories and on transfer flows, showing a plain-language breakdown of impacts (budgets, account balances, net worth, and why).\n- Add an impact preview before committing high-stakes edits/transfers (what will change, in which direction, and why).","acceptance_criteria":"- Credit payment categories and transfer flows include an accessible explanation affordance with stable selectors for Cypress.\n- Before committing, users can preview the impact on budgets/accounts/net worth for (a) credit card spending corrections and (b) transfers treated as spending.\n- Update Cypress stories 16 and 12 to assert presence/behavior of the explanation/preview instead of relying on implicit knowledge.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:57:26.872460509-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:57:26.872460509-08:00","labels":["backend","cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.12","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:57:26.873518386-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.13","title":"UX-015: Separate system categories in transaction category select","description":"Evidence:\n- Transaction category picker exists as a single \u003cselect\u003e: cypress/support/pages/TransactionPage.js uses [data-transaction-category].\n- System-generated categories appear in budgeting flows:\n  - cypress/e2e/user-stories/16-credit-transaction-correction-workflow.cy.js asserts categories like \"Visa Signature Payment\" exist alongside normal categories\n  - cypress/e2e/user-stories/18-budget-group-reorder.cy.js ignores group IDs like \"credit_card_payments\" and \"uncategorized\" during reorder\n\nProblem:\n- When system categories (payments, uncategorized, etc.) are mixed into the same category select as user categories, it's easy to pick the wrong thing and hard to understand why it exists.\n\nRecommendation:\n- Visually separate and label system categories in the transaction category select (grouped \u003coptgroup\u003e, badges, or an Advanced toggle).\n- Consider backend-provided metadata (is_system, category_kind) so the frontend can group consistently.","acceptance_criteria":"- Transaction category select clearly separates user categories from system categories (labeled groups or gated behind Advanced).\n- Cypress selectors can deterministically select user categories without being brittle to option ordering.\n- System categories remain available where needed but are harder to choose accidentally.","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-10T16:57:36.624801401-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:57:36.624801401-08:00","labels":["backend","cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.13","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:57:36.6258987-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.14","title":"UX-017: Harden loading/data freshness (remove ensureBackendState dependency)","description":"Evidence:\n- Cypress tests use cy.ensureBackendState as a guardrail for UI readiness/data freshness:\n  - cypress/e2e/user-stories/02-covering-overspending.cy.js\n  - cypress/e2e/user-stories/05-manual-transaction-lifecycle.cy.js\n  - cypress/e2e/user-stories/06-editable-ledger-rows.cy.js\n  - cypress/e2e/user-stories/13-correct-handling-inflows.cy.js\n- Additional symptoms of fragility:\n  - cypress/e2e/user-stories/05-manual-transaction-lifecycle.cy.js uses cy.reload() + cy.wait(1000) to avoid legacy/iframe hydration issues\n\nProblem:\n- The UI allows interaction before the underlying data/store state is fully loaded or consistent, forcing tests to add ad-hoc readiness polling.\n- This manifests as flakiness and inconsistent data visibility (especially when switching between routes that involve legacy host/iframe behavior).\n\nRecommendation:\n- Gate primary actions on explicit ready states (per-page/per-component), with deterministic loading indicators and disabled controls until ready.\n- Provide stable readiness landmarks for Cypress (e.g., [data-page-ready=true]) and ensure route transitions fully tear down legacy artifacts.\n- Where needed, improve backend consistency signals (ETags/versioning) so the frontend can reason about freshness.","acceptance_criteria":"- Pages expose deterministic ready landmarks and disable interaction until ready, eliminating the need for most cy.ensureBackendState usage.\n- Reduce/remove cy.ensureBackendState from stories 02, 05, 06, and 13 by waiting on UI readiness instead.\n- Remove cy.reload()+cy.wait(1000) hacks in story 05 by fixing underlying route/hydration transitions.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-10T16:57:57.897888951-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:57:57.897888951-08:00","labels":["backend","cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.14","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:57:57.89901753-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.2","title":"UX-002: Restore investment portfolio entry point from Accounts","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/20-investment-tracking.cy.js — \"navigates from accounts to portfolio and shows NAV + holdings\"\n- Flow: /#/accounts → click .account-card__name (Brokerage Account) → click [data-view-portfolio-button] → expects hash to contain /investments/brokerage_account\n- Audit finding: router redirects /investments/:accountId → /accounts/:accountId, breaking the investment tracking entry point\n\nProblem:\n- Investment tracking is not reachable via the expected UI affordance, and the investment route is not stable.\n- Cypress story 20 encodes the intended UX; the current redirect prevents reaching the portfolio view.\n\nRecommendation:\n- Ensure [data-view-portfolio-button] navigates to an investment portfolio route that renders successfully (no redirect back to accounts).\n- Add a stable page landmark for the investments view (e.g., [data-testid=investment-nav] already used) and keep the route contract consistent.","acceptance_criteria":"- Clicking [data-view-portfolio-button] from an account card consistently navigates to /#/investments/:accountId and renders the portfolio view without redirecting to /#/accounts/:accountId.\n- cypress/e2e/user-stories/20-investment-tracking.cy.js passes without route workarounds.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-10T16:40:39.026494776-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:40:39.026494776-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.2","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:40:39.027598997-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.3","title":"UX-003: Replace insufficient RTA window.alert with inline UX feedback","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/09-quick-allocate-budget-modal.cy.js — \"shows an error and skips the allocation when Ready-to-Assign is insufficient\"\n  - Stubs window.alert and expects message \"Not enough Ready to Assign funds.\"\n  - Ensures POST /api/budget/allocations is not called\n  - Uses Budget modal selectors (#budget-detail-modal, quick-allocations__actions)\n- Cypress: cypress/e2e/user-stories/10-group-quick-allocation.cy.js — \"blocks the Spent Last Month action when funds are insufficient\"\n  - Also stubs window.alert with the same message\n\nProblem:\n- window.alert is disruptive, non-stylable, and inconsistent with the rest of the app UX.\n- Cypress has to stub global alerts, which is brittle and doesn't validate in-app affordances.\n\nRecommendation:\n- Replace alert-based validation with an in-modal inline error (or toast) that is accessible and testable (e.g., [data-testid=quick-allocate-error]).\n- Keep the invariant: insufficient RTA must block the action and must not send allocation writes.","acceptance_criteria":"- Insufficient RTA quick-allocation attempts show an in-app error state (modal inline +/or toast) and do not call POST /api/budget/allocations.\n- Remove window.alert usage from these flows; Cypress no longer stubs alerts in cypress/e2e/user-stories/09-quick-allocate-budget-modal.cy.js and cypress/e2e/user-stories/10-group-quick-allocation.cy.js.\n- Both stories pass with deterministic selectors for the error state.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:40:49.372486914-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:40:49.372486914-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.3","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:40:49.373508364-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.4","title":"UX-005: Make group quick allocation atomic (bulk endpoint + progress)","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/10-group-quick-allocation.cy.js — \"allocates spent-last-month totals across all group categories\"\n  - Intercepts POST /api/budget/allocations as @groupAllocation\n  - Waits twice: cy.wait(\"@groupAllocation\"); cy.wait(\"@groupAllocation\"); implying multiple writes for one user action\n  - Triggered via #group-detail-modal quick allocation button\n\nProblem:\n- A single group-level quick action fans out into multiple writes, increasing failure surface area and making partial success likely if the client or network fails mid-stream.\n- UX has no clear progress/summary or rollback semantics for multi-write operations.\n\nRecommendation:\n- Add a transactional bulk/group allocation endpoint that performs all category allocations in one server-side transaction and returns a summary (per-category amounts, resulting RTA).\n- Update the UI to show progress + a clear completion summary, and make Cypress assert a single request for the action.","acceptance_criteria":"- One group quick-allocation click results in a single API request that performs all allocations atomically (all-or-nothing).\n- UI shows deterministic progress and a completion summary (with stable selectors).\n- Update cypress/e2e/user-stories/10-group-quick-allocation.cy.js to wait for a single request (no duplicate cy.wait(\"@groupAllocation\")).","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:40:59.33117444-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:40:59.33117444-08:00","labels":["backend","cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.4","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:40:59.332648828-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.5","title":"UX-006: Make TransactionTable editing explicit + safer delete","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/06-editable-ledger-rows.cy.js — \"edits an erroneous utility payment down to 30.00 while keeping Ready-to-Assign stable\"\n  - Enters edit mode via a table-cell click: #transactions-body tr [data-testid=transaction-col-account]\n  - Saves by typing {enter} into [data-inline-outflow] (no explicit Save/Cancel)\n  - Status toggled via [data-inline-status-toggle]\n- Cypress: cypress/e2e/user-stories/06-editable-ledger-rows.cy.js — \"removes a transaction by toggling its status to inactive\" (delete-by-status cycling)\n- Cypress: cypress/e2e/user-stories/14-display-monthly-summary-cards.cy.js also saves edits via Enter\n\nProblem:\n- Inline editing is discoverable only via row/cell click, and commit is implicit via Enter; this is easy to miss and hard to use safely.\n- “Delete” semantics are currently conflated with status cycling (pending → cleared → voided), which is risky and not user-obvious.\n\nRecommendation:\n- Add explicit edit affordances per row (Edit button/icon) and explicit Save/Cancel controls while editing.\n- Provide a safer, consistent delete workflow (confirm + undo where possible), and decouple “void/cleared” status from “remove from active view.”\n- Add stable data selectors for edit/save/cancel/delete so Cypress can stop relying on cell-click + Enter.","acceptance_criteria":"- Transaction rows expose explicit Edit and Delete affordances; edit mode exposes Save/Cancel controls with stable selectors (e.g., [data-transaction-edit], [data-transaction-save], [data-transaction-cancel], [data-transaction-delete]).\n- Deleting/removing a transaction uses a consistent confirm/undo pattern (not status-cycling), and is auditable.\n- Update cypress/e2e/user-stories/06-editable-ledger-rows.cy.js and cypress/e2e/user-stories/14-display-monthly-summary-cards.cy.js to use explicit controls (no cell-click + Enter assumptions).","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:41:10.679437011-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:41:10.679437011-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.5","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:41:10.680557845-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.6","title":"UX-007: Improve AllocationTable inline edit/delete (no waits, confirm/undo)","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/17-editable-allocation-ledger.cy.js — \"User Story 17 – user can edit an allocation inline and RTA updates correctly\"\n  - Enters edit mode via row click: #allocations-body tr\n  - Uses fixed wait: cy.wait(500) to let Vue update\n  - Deletes via button[title='Delete allocation'] and DELETE /api/budget/allocations/*\n  - No explicit confirm/undo semantics asserted\n- Cypress: cypress/e2e/user-stories/19-allocations-page.cy.js — \"allows creating and editing allocations\"\n  - Uses cy.wait(1000) for render\n  - Saves inline edits via Enter (AllocationPage.saveInlineEdit types {enter})\n\nProblem:\n- Inline edit/delete is hidden behind row click and timing-sensitive UI updates (fixed waits).\n- Deletion lacks standardized confirm/undo, increasing accidental loss risk.\n\nRecommendation:\n- Add explicit edit affordances and Save/Cancel controls in the AllocationTable; remove reliance on Enter-to-save.\n- Make delete safe via confirm + undo (or soft-delete with reversible window) with deterministic selectors for Cypress.\n- Replace fixed waits with deterministic “row entered edit mode” landmarks.","acceptance_criteria":"- Remove fixed waits from cypress/e2e/user-stories/17-editable-allocation-ledger.cy.js and cypress/e2e/user-stories/19-allocations-page.cy.js by adding deterministic edit-mode/ready selectors.\n- Allocation edit mode has explicit Save/Cancel controls with stable selectors; Cypress uses those instead of Enter-to-save.\n- Allocation delete uses consistent confirm/undo UX and is auditable.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:56:23.754226504-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:56:23.754226504-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.6","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:56:23.755283622-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.7","title":"UX-008: Standardize confirm/undo + auditability for high-stakes actions","description":"Evidence:\n- Transactions: cypress/e2e/user-stories/06-editable-ledger-rows.cy.js — \"removes a transaction by toggling its status to inactive\"\n  - Removal is achieved by status cycling via [data-inline-status-toggle], not an explicit delete/undo UX\n- Allocations: cypress/e2e/user-stories/17-editable-allocation-ledger.cy.js deletes via button[title='Delete allocation'] with no confirm/undo asserted\n- Quick allocation: cypress/e2e/user-stories/09-quick-allocate-budget-modal.cy.js and 10-group-quick-allocation.cy.js stub window.alert for insufficient RTA\n\nProblem:\n- Destructive and high-stakes actions use inconsistent patterns (status cycling vs delete button vs window.alert), which is unsafe and hard to learn.\n- Lack of standardized confirm/undo and audit affordances increases risk of irreversible mistakes and makes Cypress tests brittle.\n\nRecommendation:\n- Establish a single UX pattern for destructive/high-stakes actions: confirm dialog with context (what changes), optional undo window, and consistent audit record semantics.\n- Provide shared frontend components + backend primitives (transactional operations, returned operation IDs, consistent error schema) to support this pattern across domains.","acceptance_criteria":"- Transactions, allocations, and quick-allocation flows use the same confirm/undo pattern with stable selectors for Cypress.\n- Remove window.alert usage from UX-critical flows; Cypress specs stop stubbing alerts.\n- Actions are auditable (user can see what changed, and backend records can be traced/reconciled).\n- Update relevant Cypress specs (at least stories 06, 17, 09, 10) to assert the standardized confirm/undo UX.","status":"open","priority":0,"issue_type":"feature","created_at":"2026-01-10T16:56:37.955292498-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:56:37.955292498-08:00","labels":["backend","cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.7","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:56:37.956380449-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.8","title":"UX-009: Reduce budgets page IA overload (split/tabs + clear landmarks)","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/19-allocations-page.cy.js — \"allows creating and editing allocations\"\n  - AllocationPage.visit() navigates to /#/budgets (see cypress/support/pages/AllocationPage.js)\n  - The same route renders both the budgets grid (#budgets-body) and the allocations ledger (#allocations-body)\n\nProblem:\n- The /#/budgets route is overloaded with multiple primary jobs (budget category grid + allocations ledger), increasing cognitive load and making navigation/landmarks unclear.\n- Cypress also treats /#/budgets as both Budgets and Allocations pages, which is a smell for IA ambiguity.\n\nRecommendation:\n- Split into separate routes (e.g., /#/budgets and /#/allocations) or implement a clear tabbed IA with explicit landmarks and URLs (e.g., /#/budgets?tab=allocations).\n- Ensure each view has an unambiguous heading/landmark + stable data-testid for Cypress.","acceptance_criteria":"- Budgets and Allocations are separated by route or explicit tabs with clear landmarks, and each state has a deterministic selector for Cypress.\n- Update cypress/e2e/user-stories/19-allocations-page.cy.js (and AllocationPage.visit()) to navigate to the correct view without relying on an overloaded /#/budgets route.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-10T16:56:47.268630807-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:56:47.268630807-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.8","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:56:47.26973387-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-pjb.9","title":"UX-010: Close accessibility + keyboard interaction gaps","description":"Evidence:\n- Cypress: cypress/e2e/user-stories/18-budget-group-reorder.cy.js — \"reorders groups via drag and drop and persists after save\"\n  - Reorder relies on drag/drop events with .group-row__drag-handle and forced triggers\n  - UI controls are [data-budgets-reorder], [data-budgets-reorder-save], [data-budgets-reorder-cancel]\n- Row-click editing patterns exist in Transactions/Allocations (e.g., story 06 + story 17), with implicit Enter-to-save\n\nProblem:\n- Critical interactions are not clearly keyboard-accessible (DnD reorder, row-click editing), and modal focus/escape handling is not validated.\n- Accessibility gaps increase UX friction and make deterministic Cypress testing harder (tests resort to force clicks and fixed waits).\n\nRecommendation:\n- Implement keyboard-friendly equivalents for DnD reorder (move up/down controls, ARIA attributes).\n- Ensure modals trap focus, support Escape-to-close, and expose accessible labels/landmarks.\n- Make inline editing discoverable and operable via keyboard without hidden gestures; add Cypress coverage for keyboard paths.","acceptance_criteria":"- Budget group reorder can be completed via keyboard-only controls (no drag required) and remains testable with deterministic selectors.\n- Modals support focus trap + Escape-to-close; Cypress can assert focus/close behavior.\n- Row-edit flows can be started and completed via explicit controls and keyboard, without forced clicks or timing hacks.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:56:57.361562562-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-10T16:56:57.361562562-08:00","labels":["cypress","frontend","ux"],"dependencies":[{"issue_id":"dojo-pjb.9","depends_on_id":"dojo-pjb","type":"parent-child","created_at":"2026-01-10T16:56:57.362603426-08:00","created_by":"Brandon Ogle"}]}
{"id":"dojo-ygs","title":"UX-021: Reconcile session framework (extensible account types)","description":"Goal:\n- Define a shared reconciliation session “shell” that can support multiple account types (cash/credit today; investments positions snapshots and tangibles valuations later) with a consistent outer UX and lifecycle.\n\nMotivation:\n- Reconciliation is a high-stakes workflow; we want a single, predictable session model (steps, validation, confirm/undo, audit/tracing) while allowing account-type-specific inner panels and math.\n\nDesign direction:\n- Create a reconciliation session framework with a clear adapter/plugin contract:\n  - Outer shell: session header, stepper/sections, keyboard navigation, error handling, confirm/undo, and completion semantics.\n  - Inner adapter: account-type-specific inputs, matching UI (transactions vs positions vs valuations), and delta computation.\n- Refactor existing cash/credit reconciliation to use the shell as the first adapter implementation (no behavior regression).\n- Add scaffold adapters for investments (positions snapshot) and tangibles (valuation) to prove extensibility, even if they are minimal placeholders initially.\n\nRelated: dojo-pjb.7 (UX-008 confirm/undo patterns), dojo-pjb.9 (UX-010 keyboard/accessibility), dojo-cdu (UX-019 reconciliation delta-finding improvements).\n","acceptance_criteria":"- There is a shared reconciliation session shell (component/route) that owns common UX (header, navigation, completion CTA, cancel/confirm/undo affordances) and can host multiple reconciliation adapter types.\n- Cash/credit reconciliation is implemented as an adapter using the shared shell, with no functional regression vs the previous flow (a user can still reconcile a cash and a credit account end-to-end).\n- The adapter contract is explicit (typed interface or documented contract) covering: required inputs, delta/validation outputs, and commit action(s).\n- Two additional adapter stubs exist and are renderable in the shell:\n  - Investments: positions snapshot reconciliation panel stub.\n  - Tangibles: valuation reconciliation panel stub.\n- The shell provides consistent keyboard-accessible navigation and exposes stable landmarks/selectors suitable for future Cypress coverage.\n- Existing reconciliation unit/integration tests continue passing after the refactor (e.g., tests/unit/core/test_reconciliation.py and tests/integration/reconciliation/test_reconciliation_api.py).\n","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T13:19:39.695307129-08:00","created_by":"Brandon Ogle","updated_at":"2026-01-11T13:31:05.0965458-08:00","labels":["backend","frontend","ux"]}
